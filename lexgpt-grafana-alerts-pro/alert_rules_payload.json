{
  "rules": [
    {
      "title": "P95 response time high",
      "condition": {
        "type": "threshold",
        "query": "SELECT percentile(\"value\",95) FROM \"http_req_duration\" WHERE $timeFilter",
        "threshold": 2000,
        "for": "3m"
      },
      "notifications": [
        "Slack - LexGPT Alerts",
        "SMTP - LexGPT Alerts"
      ],
      "message": "[LexGPT] ALERT: P95 response time high on <ENV> - {{ $values }}"
    },
    {
      "title": "HTTP error rate high",
      "condition": {
        "type": "threshold",
        "query": "SELECT mean(\"value\") FROM \"http_req_failed\" WHERE $timeFilter",
        "threshold": 0.02,
        "for": "3m"
      },
      "notifications": [
        "Slack - LexGPT Alerts",
        "SMTP - LexGPT Alerts"
      ],
      "message": "[LexGPT] ALERT: HTTP error rate high on <ENV> - {{ $values }}"
    }
  ]
}